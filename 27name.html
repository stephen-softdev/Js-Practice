<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CRUD Buttons</title>
  </head>
  <body>
    <h2>Add / Edit / Delete / update</h2>

    <input type="text" id="nameInput" placeholder="Enter name" />
    <button onclick="addData()">Add</button>

    <table>
      <tr>
        <td id="list"></td>
      </tr>
    </table>
    <script>
      const API_URL = "https://694e23abb5bc648a93bf7028.mockapi.io/stephen1";
      let editId = null;

      // GET
      function getData() {
        fetch(API_URL)
          .then((res) => res.json())
          .then((data) => {
            const list = document.getElementById("list");
            list.innerHTML = "";
            data.forEach((item) => {
              list.innerHTML += `
              <li>
                ${item.name}
                <button onclick="editData('${item.id}', '${item.name}')">Edit</button>
                <button onclick="deleteData('${item.id}')">Delete</button>
              </li>
            `;
            });
          });
      }

      // ADD //UPDATE
      function addData() {
        const name = document.getElementById("nameInput").value;
        if (editId) {
          fetch(`${API_URL}/${editId}`, {
            method: "PUT",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name }),
          }).then(() => {
            editId = null;
            document.getElementById("nameInput").value = "";
            getData();
          });
        } else {
          fetch(API_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name }),
          }).then(() => {
            document.getElementById("nameInput").value = "";
            getData();
          });
        }
      }

      // EDIT
      function editData(id, name) {
        document.getElementById("nameInput").value = name;
        editId = id;
      }

      // DELETE
      function deleteData(id) {
        fetch(`${API_URL}/${id}`, {
          method: "DELETE",
        }).then(() => getData());
      }
      //update

      getData();
    </script>
  </body>
</html>
